"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8279],{8279:(D,u,a)=>{a.r(u),a.d(u,{MisPlanesPage:()=>b});var d=a(5861),r=a(6895),p=a(433),n=a(7173),P=a(1135),t=a(1571),g=a(8468),h=a(9846),m=a(7556),C=a(374);const f=["scrollElement"];function M(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"ion-toolbar",7)(1,"ion-buttons",8)(2,"ion-button",9),t.NdJ("tap",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.backButtonClickPlan())}),t._UZ(3,"ion-icon",10),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.ALo(6,"async"),t.qZA()(),t.TgZ(7,"ion-title",12),t._uU(8," DeletePlan "),t.qZA(),t.TgZ(9,"ion-buttons",13)(10,"ion-button",9),t.NdJ("tap",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.removeSelectedPlan())}),t._UZ(11,"ion-icon",14),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,1,e.planItemCount))}}function v(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"ion-toolbar",15)(1,"ion-buttons",8),t._UZ(2,"ion-menu-button"),t.qZA(),t.TgZ(3,"ion-title"),t._uU(4," MisPlanes "),t.qZA(),t.TgZ(5,"ion-buttons",13)(6,"ion-button",9),t.NdJ("tap",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.logout())}),t._UZ(7,"ion-icon",16),t.qZA()()()}}const T=function(s){return{"selected-plan":s}};function E(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"ion-item-sliding",17),t.NdJ("press",function(){const c=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.selectPlan(c.id))}),t.TgZ(1,"ion-item",18)(2,"ion-thumbnail",8),t._UZ(3,"ion-img",19),t.qZA(),t.TgZ(4,"ion-label")(5,"h2")(6,"strong"),t._uU(7),t.qZA()()()(),t.TgZ(8,"ion-item-options",13)(9,"ion-item-option",20),t.NdJ("tap",function(){const c=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.planDetail(c.id))}),t._UZ(10,"ion-icon",21),t.qZA()()()}if(2&s){const e=i.$implicit,l=t.oxw();t.Q6J("ngClass",t.VKq(3,T,l.selectedPlan===e.id)),t.xp6(3),t.s9C("src",e.img),t.xp6(4),t.Oqu(e.title)}}let b=(()=>{class s{constructor(e,l,o,c,_,Z,x,O){this.router=e,this.cd=l,this.navCtrl=o,this.alertCtrl=c,this.popoverCtrl=_,this.uiService=Z,this.authService=x,this.planService=O,this.hotel=[],this.plan={id:"",title:"",img:""},this.plans=[],this.deletePlan=!1,this.planItemCount=new P.X(0)}ngOnInit(){this.updateScroll(),this.loadPlanes()}updateScroll(){setTimeout(()=>{this.content.scrollToBottom()},1500)}loadPlanes(){this.planService.getPlanes().subscribe(e=>{this.plans=e})}planDetail(e){this.navCtrl.navigateForward(`/plan-detalle/${e}`)}clearPlan(){this.selectedPlan=null}selectPlan(e){this.deletePlan=!0,this.selectedPlan===e?this.clearPlan():this.selectedPlan=e,this.planToolbar(this.plan)}planToolbar(e){let l=!1;for(let o of this.hotel)if(o.id===e.id){o.amount+=1,l=!0;break}l||(e.amount=1,this.hotel.push(e)),this.planItemCount.next(this.planItemCount.value+1)}removeSelectedPlan(){var e=this;return(0,d.Z)(function*(){yield(yield e.alertCtrl.create({header:"Warning!!!",message:"You want to delete the user??",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:o=>{console.log("Confirmado Cancelar: blah"),e.backButtonClickPlan()}},{text:"OK",handler:()=>{console.log("Confirmado Aceptar"),e.planService.deletePlan(e.selectedPlan).subscribe(o=>{e.clearPlan(),e.loadPlanes(),e.backButtonClickPlan(),e.uiService.presentToast("Deleted partner")},o=>{console.log(o)})}}]})).present()})()}backButtonClickPlan(){this.clearPlan(),this.deletePlan=!1}logout(){var e=this;return(0,d.Z)(function*(){yield(yield e.alertCtrl.create({header:"Warning!!!",message:"Do you want to log out of the APP?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:o=>{console.log("Confirmado Cancelar: blah")}},{text:"OK",handler:()=>{console.log("Confirmado Aceptar"),e.authService.logout(),e.router.navigateByUrl("/",{replaceUrl:!0}),e.uiService.presentToast("Session Closed on the APP")}}]})).present()})()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(g.F0),t.Y36(t.sBO),t.Y36(n.SH),t.Y36(n.Br),t.Y36(n.Dh),t.Y36(h.F),t.Y36(m.e),t.Y36(C.D))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-mis-planes"]],viewQuery:function(e,l){if(1&e&&t.Gf(f,5),2&e){let o;t.iGM(o=t.CRH())&&(l.content=o.first)}},standalone:!0,features:[t.jDz],decls:7,vars:4,consts:[[1,"ion-no-border"],["color","warning",4,"ngIf"],["color","primary",4,"ngIf"],[3,"scrollEvents"],["scrollElement",""],[1,"ion-padding"],[3,"ngClass","press",4,"ngFor","ngForOf"],["color","warning"],["slot","start"],[3,"tap"],["md","arrow-back-sharp","slot","icon-only","color","dark"],[1,"hotel-length"],[1,"miTitulo"],["slot","end"],["md","trash-sharp","slot","icon-only","color","dark"],["color","primary"],["md","log-out-sharp","slot","icon-only","color","light"],[3,"ngClass","press"],["button","","lines","none"],[3,"src"],["color","primary",3,"tap"],["md","eye-sharp","slot","icon-only","color","light"]],template:function(e,l){1&e&&(t.TgZ(0,"ion-header",0),t.YNc(1,M,12,3,"ion-toolbar",1),t.YNc(2,v,8,0,"ion-toolbar",2),t.qZA(),t.TgZ(3,"ion-content",3,4)(5,"ion-list",5),t.YNc(6,E,11,5,"ion-item-sliding",6),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",l.deletePlan),t.xp6(1),t.Q6J("ngIf",!l.deletePlan),t.xp6(1),t.Q6J("scrollEvents",!0),t.xp6(3),t.Q6J("ngForOf",l.plans))},dependencies:[n.Pc,n.YG,n.Sm,n.W2,n.Gu,n.gu,n.Xz,n.Ie,n.u8,n.IK,n.td,n.Q$,n.q_,n.fG,n.Bs,n.wd,n.sr,r.ez,r.mk,r.sg,r.O5,r.Ov,p.u5]}),s})()}}]);